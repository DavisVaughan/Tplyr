<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sorting a Tplyr Table • Tplyr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Sorting a Tplyr Table">
<meta property="og:description" content="Tplyr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Tplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Advanced_Tables_with_tplyr.html">Advanced_Tables_with_tplyr</a>
    </li>
    <li>
      <a href="../articles/alpha-release.html">Tplyr (Alpha Release)</a>
    </li>
    <li>
      <a href="../articles/beta-release.html">Tplyr (Beta Release)</a>
    </li>
    <li>
      <a href="../articles/count_shift.html">Count and Shift Tables</a>
    </li>
    <li>
      <a href="../articles/desc-vignette.html">Descriptive Statistic Layers</a>
    </li>
    <li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/readme.html">README</a>
    </li>
    <li>
      <a href="../articles/riskdiff.html">Risk Difference</a>
    </li>
    <li>
      <a href="../articles/sort.html">Sorting a Tplyr Table</a>
    </li>
    <li>
      <a href="../articles/test.html">test</a>
    </li>
    <li>
      <a href="../articles/tplyr.html">tplyr</a>
    </li>
    <li>
      <a href="../articles/tplyr_internals.html">tplyr_internals</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/atorus-research/Tplyr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Sorting a Tplyr Table</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/master/vignettes/sort.Rmd"><code>vignettes/sort.Rmd</code></a></small>
      <div class="hidden name"><code>sort.Rmd</code></div>

    </div>

    
    
<div id="sorting-a-tplyr-table" class="section level1">
<h1 class="hasAnchor">
<a href="#sorting-a-tplyr-table" class="anchor"></a>Sorting a Tplyr Table</h1>
<p>With sorting functions available in R, like <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">dplyr::arrange</a></code>. You should have all the data you need to arrange records how you wish.</p>
<p>In this example, the <code>t</code> table will output with method for sorting the layers, the <code>SEX</code> variable, and the values of the calculations.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_total_group</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_treat_grps</a></span>(<span class="kw">Treatment</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Xanomeline Low Dose"</span>, <span class="st">"Xanomeline High Dose"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">EOSSTT</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="no">SEX</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">HEIGHTBL</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="no">SEX</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()

<span class="fu">kable</span>(<span class="no">t</span>)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Total</th>
<th align="left">var1_Treatment</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="left">COMPLETED</td>
<td align="left">34 ( 39.5%)</td>
<td align="left">64 ( 25.2%)</td>
<td align="left">30 ( 17.9%)</td>
<td align="left">13 ( 15.5%)</td>
<td align="left">17 ( 20.2%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">DISCONTINUED</td>
<td align="left">19 ( 22.1%)</td>
<td align="left">79 ( 31.1%)</td>
<td align="left">60 ( 35.7%)</td>
<td align="left">27 ( 32.1%)</td>
<td align="left">33 ( 39.3%)</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">COMPLETED</td>
<td align="left">24 ( 27.9%)</td>
<td align="left">46 ( 18.1%)</td>
<td align="left">22 ( 13.1%)</td>
<td align="left">14 ( 16.7%)</td>
<td align="left">8 ( 9.5%)</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">DISCONTINUED</td>
<td align="left">9 ( 10.5%)</td>
<td align="left">65 ( 25.6%)</td>
<td align="left">56 ( 33.3%)</td>
<td align="left">30 ( 35.7%)</td>
<td align="left">26 ( 31.0%)</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">n</td>
<td align="left">53</td>
<td align="left">143</td>
<td align="left">90</td>
<td align="left">40</td>
<td align="left">50</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Mean (SD)</td>
<td align="left">156.1 ( 8.01)</td>
<td align="left">157.2 ( 7.37)</td>
<td align="left">157.9 ( 6.92)</td>
<td align="left">158.0 ( 6.37)</td>
<td align="left">157.9 ( 7.40)</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Median</td>
<td align="left">156.2</td>
<td align="left">157.5</td>
<td align="left">157.5</td>
<td align="left">157.5</td>
<td align="left">157.8</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Q1, Q3</td>
<td align="left">150, 163</td>
<td align="left">152, 163</td>
<td align="left">154, 163</td>
<td align="left">154, 164</td>
<td align="left">154, 163</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Min, Max</td>
<td align="left">137, 174</td>
<td align="left">136, 175</td>
<td align="left">136, 175</td>
<td align="left">146, 170</td>
<td align="left">136, 175</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Missing</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">n</td>
<td align="left">33</td>
<td align="left">111</td>
<td align="left">78</td>
<td align="left">44</td>
<td align="left">34</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Mean (SD)</td>
<td align="left">173.0 ( 8.09)</td>
<td align="left">172.5 ( 7.95)</td>
<td align="left">172.3 ( 7.93)</td>
<td align="left">172.9 ( 7.30)</td>
<td align="left">171.6 ( 8.73)</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Median</td>
<td align="left">174.0</td>
<td align="left">172.7</td>
<td align="left">172.7</td>
<td align="left">172.7</td>
<td align="left">172.1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Q1, Q3</td>
<td align="left">170, 178</td>
<td align="left">168, 178</td>
<td align="left">168, 178</td>
<td align="left">170, 178</td>
<td align="left">165, 177</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Min, Max</td>
<td align="left">145, 185</td>
<td align="left">145, 196</td>
<td align="left">147, 196</td>
<td align="left">147, 190</td>
<td align="left">158, 196</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Missing</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
<div id="sorting-table-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#sorting-table-columns" class="anchor"></a>Sorting Table Columns</h2>
<div id="ordering-helpers" class="section level3">
<h3 class="hasAnchor">
<a href="#ordering-helpers" class="anchor"></a>Ordering Helpers</h3>
<p>Ordering helpers are columns that can be used to arrange the rows of the table. One for each Row Label, plus a column for the layers output from the build and they can be used to order the table in several ways.</p>
<p>In the example above, the <code>t</code> table outputs with three columns</p>
<ul>
<li>ord_layer_index indexes the layer itself.</li>
<li>ord_layer_1 indexes the first by variable, <code>SEX</code>. No options were presented so sorting was done alphabetically.</li>
<li>ord_layer_2 indexes the values of the <code>EOSSTT</code> variable in the count layer, and the names of the summaries in the desc layer.</li>
</ul>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu">kable</span>(
  <span class="no">t</span> <span class="kw">%&gt;%</span>
    <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"ord"</span>))
)</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
</div>
<div id="reordering-and-droping-columns" class="section level3">
<h3 class="hasAnchor">
<a href="#reordering-and-droping-columns" class="anchor"></a>Reordering and Droping Columns</h3>
<p>The functions <code><a href="https://dplyr.tidyverse.org/reference/select.html">dplyr::select()</a></code>, <code>dplyr::relocate()</code>, <code><a href="https://rdrr.io/pkg/magrittr/man/aliases.html">magrittr::extract()</a></code>, and <code><a href="https://rdrr.io/r/base/Extract.html">[</a></code> can all be used to reorder, drop, and sort columns however a user needs too.</p>
<p>To drop the ordering helpers, you can easily subtract them with dplyr and tidyselect.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu">kable</span>(<span class="no">t</span> <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(-<span class="fu">starts_with</span>(<span class="st">"ord_"</span>)))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Total</th>
<th align="left">var1_Treatment</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="left">COMPLETED</td>
<td align="left">34 ( 39.5%)</td>
<td align="left">64 ( 25.2%)</td>
<td align="left">30 ( 17.9%)</td>
<td align="left">13 ( 15.5%)</td>
<td align="left">17 ( 20.2%)</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">DISCONTINUED</td>
<td align="left">19 ( 22.1%)</td>
<td align="left">79 ( 31.1%)</td>
<td align="left">60 ( 35.7%)</td>
<td align="left">27 ( 32.1%)</td>
<td align="left">33 ( 39.3%)</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">COMPLETED</td>
<td align="left">24 ( 27.9%)</td>
<td align="left">46 ( 18.1%)</td>
<td align="left">22 ( 13.1%)</td>
<td align="left">14 ( 16.7%)</td>
<td align="left">8 ( 9.5%)</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">DISCONTINUED</td>
<td align="left">9 ( 10.5%)</td>
<td align="left">65 ( 25.6%)</td>
<td align="left">56 ( 33.3%)</td>
<td align="left">30 ( 35.7%)</td>
<td align="left">26 ( 31.0%)</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">n</td>
<td align="left">53</td>
<td align="left">143</td>
<td align="left">90</td>
<td align="left">40</td>
<td align="left">50</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Mean (SD)</td>
<td align="left">156.1 ( 8.01)</td>
<td align="left">157.2 ( 7.37)</td>
<td align="left">157.9 ( 6.92)</td>
<td align="left">158.0 ( 6.37)</td>
<td align="left">157.9 ( 7.40)</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Median</td>
<td align="left">156.2</td>
<td align="left">157.5</td>
<td align="left">157.5</td>
<td align="left">157.5</td>
<td align="left">157.8</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Q1, Q3</td>
<td align="left">150, 163</td>
<td align="left">152, 163</td>
<td align="left">154, 163</td>
<td align="left">154, 164</td>
<td align="left">154, 163</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Min, Max</td>
<td align="left">137, 174</td>
<td align="left">136, 175</td>
<td align="left">136, 175</td>
<td align="left">146, 170</td>
<td align="left">136, 175</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Missing</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">n</td>
<td align="left">33</td>
<td align="left">111</td>
<td align="left">78</td>
<td align="left">44</td>
<td align="left">34</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Mean (SD)</td>
<td align="left">173.0 ( 8.09)</td>
<td align="left">172.5 ( 7.95)</td>
<td align="left">172.3 ( 7.93)</td>
<td align="left">172.9 ( 7.30)</td>
<td align="left">171.6 ( 8.73)</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Median</td>
<td align="left">174.0</td>
<td align="left">172.7</td>
<td align="left">172.7</td>
<td align="left">172.7</td>
<td align="left">172.1</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Q1, Q3</td>
<td align="left">170, 178</td>
<td align="left">168, 178</td>
<td align="left">168, 178</td>
<td align="left">170, 178</td>
<td align="left">165, 177</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Min, Max</td>
<td align="left">145, 185</td>
<td align="left">145, 196</td>
<td align="left">147, 196</td>
<td align="left">147, 190</td>
<td align="left">158, 196</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Missing</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
<p>Or you can reorder columns, in this example total is moved to the first column.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu">kable</span>(<span class="no">t</span> <span class="kw">%&gt;%</span>
  <span class="fu">select</span>( <span class="fu">starts_with</span>(<span class="st">"row"</span>), <span class="no">var1_Total</span>, <span class="fu">starts_with</span>(<span class="st">"var1"</span>)))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="left">var1_Total</th>
<th align="left">var1_Placebo</th>
<th align="left">var1_Treatment</th>
<th align="left">var1_Xanomeline High Dose</th>
<th align="left">var1_Xanomeline Low Dose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="left">COMPLETED</td>
<td align="left">64 ( 25.2%)</td>
<td align="left">34 ( 39.5%)</td>
<td align="left">30 ( 17.9%)</td>
<td align="left">13 ( 15.5%)</td>
<td align="left">17 ( 20.2%)</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">DISCONTINUED</td>
<td align="left">79 ( 31.1%)</td>
<td align="left">19 ( 22.1%)</td>
<td align="left">60 ( 35.7%)</td>
<td align="left">27 ( 32.1%)</td>
<td align="left">33 ( 39.3%)</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">COMPLETED</td>
<td align="left">46 ( 18.1%)</td>
<td align="left">24 ( 27.9%)</td>
<td align="left">22 ( 13.1%)</td>
<td align="left">14 ( 16.7%)</td>
<td align="left">8 ( 9.5%)</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">DISCONTINUED</td>
<td align="left">65 ( 25.6%)</td>
<td align="left">9 ( 10.5%)</td>
<td align="left">56 ( 33.3%)</td>
<td align="left">30 ( 35.7%)</td>
<td align="left">26 ( 31.0%)</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">n</td>
<td align="left">143</td>
<td align="left">53</td>
<td align="left">90</td>
<td align="left">40</td>
<td align="left">50</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Mean (SD)</td>
<td align="left">157.2 ( 7.37)</td>
<td align="left">156.1 ( 8.01)</td>
<td align="left">157.9 ( 6.92)</td>
<td align="left">158.0 ( 6.37)</td>
<td align="left">157.9 ( 7.40)</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Median</td>
<td align="left">157.5</td>
<td align="left">156.2</td>
<td align="left">157.5</td>
<td align="left">157.5</td>
<td align="left">157.8</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Q1, Q3</td>
<td align="left">152, 163</td>
<td align="left">150, 163</td>
<td align="left">154, 163</td>
<td align="left">154, 164</td>
<td align="left">154, 163</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Min, Max</td>
<td align="left">136, 175</td>
<td align="left">137, 174</td>
<td align="left">136, 175</td>
<td align="left">146, 170</td>
<td align="left">136, 175</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Missing</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">n</td>
<td align="left">111</td>
<td align="left">33</td>
<td align="left">78</td>
<td align="left">44</td>
<td align="left">34</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Mean (SD)</td>
<td align="left">172.5 ( 7.95)</td>
<td align="left">173.0 ( 8.09)</td>
<td align="left">172.3 ( 7.93)</td>
<td align="left">172.9 ( 7.30)</td>
<td align="left">171.6 ( 8.73)</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Median</td>
<td align="left">172.7</td>
<td align="left">174.0</td>
<td align="left">172.7</td>
<td align="left">172.7</td>
<td align="left">172.1</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Q1, Q3</td>
<td align="left">168, 178</td>
<td align="left">170, 178</td>
<td align="left">168, 178</td>
<td align="left">170, 178</td>
<td align="left">165, 177</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Min, Max</td>
<td align="left">145, 196</td>
<td align="left">145, 185</td>
<td align="left">147, 196</td>
<td align="left">147, 190</td>
<td align="left">158, 196</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Missing</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="sorting-the-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#sorting-the-layers" class="anchor"></a>Sorting the Layers</h2>
<p>Layers are binded together to create the table so they will output in the order they are added to the table. If you have a need to reorder them, the <code>ord_layer_index</code> column allows you to do this or drop layers altogether.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu">kable</span>(<span class="no">t</span> <span class="kw">%&gt;%</span>
        <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"row"</span>), <span class="fu">starts_with</span>(<span class="st">"ord"</span>)) <span class="kw">%&gt;%</span>
      <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="no">ord_layer_index</span>)))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="left">n</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Mean (SD)</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Median</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Q1, Q3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Min, Max</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Missing</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">n</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Mean (SD)</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Median</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Q1, Q3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Min, Max</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Missing</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">COMPLETED</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">DISCONTINUED</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">COMPLETED</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">DISCONTINUED</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
</div>
<div id="sorting-the-by-varaibles" class="section level2">
<h2 class="hasAnchor">
<a href="#sorting-the-by-varaibles" class="anchor"></a>Sorting the ‘by’ varaibles</h2>
<p>The variables passed as ‘by’ variables can be sorted with their respective ordering helper column. The sort values are calculated depending on the attributes that variable has in the ‘target’ dataset. The ordering index will calculate based on the first applicable method below.</p>
<ol style="list-style-type: decimal">
<li>If the variable has a VARN variable in the ‘target’ dataset, that is, <code>&lt;by&gt;N %in% names(target)</code> is TRUE, the values in the ordering helper column will be the values of that VARN variable for that ‘by’ value.</li>
<li>If the ‘by’ variable is a factor, the values of the ordering column will be the index of the levels.</li>
<li>If neither 1 or 2 are true, the values in the ordering column will be an index based on an alphabetical sorting.</li>
</ol>
<div id="varn" class="section level3">
<h3 class="hasAnchor">
<a href="#varn" class="anchor"></a>VARN</h3>
<p>By adding the variable ‘amN’, the ‘ord_layer_1’ will output using those values. This is especially useful in the case of SDTM variables like VISIT and VISITN where ordering is important but ordering alphabetically would produce incorrect ordering.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">EOSSTT</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="no">RACE</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="no">row_label1</span>, <span class="no">ord_layer_1</span>) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">WHITE</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">WHITE</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<div id="factor" class="section level3">
<h3 class="hasAnchor">
<a href="#factor" class="anchor"></a>Factor</h3>
<p>If there is no succinct way to order the variables alphabetically or with a VARN variable, Tplyr can use a factor in the target dataset to order the dataset and create the ordering helper column. Internally, Tplyr uses a <code><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">tidyr::pivot_wider()</a></code> to create the output which will arrange the rows automatically. The ordering helper is still provided for clarity, cross-language support, to not rely on a dependency for this functionality, and to preserve the factor levels for the row labels.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">adsl</span>$<span class="no">ETHNIC</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">adsl</span>$<span class="no">ETHNIC</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"HISPANIC OR LATINO"</span>, <span class="st">"NOT HISPANIC OR LATINO"</span>))
<span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">EOSSTT</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="no">ETHNIC</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="no">row_label1</span>, <span class="no">ord_layer_1</span>) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">HISPANIC OR LATINO</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">HISPANIC OR LATINO</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
</div>
<div id="alphabetical" class="section level3">
<h3 class="hasAnchor">
<a href="#alphabetical" class="anchor"></a>Alphabetical</h3>
<p>If the target doesn’t have a VARN variable in the target dataset, and isn’t a factor, it is sorted alphabetically.</p>
</div>
</div>
<div id="sorting-desc-summaries" class="section level2">
<h2 class="hasAnchor">
<a href="#sorting-desc-summaries" class="anchor"></a>Sorting ‘Desc’ Summaries</h2>
<p>‘Desc’ summaries are indexed in the order they are passed to <code><a href="../reference/set_custom_summaries.html">set_custom_summaries()</a></code> or found in the <code>tplyr.desc_layer_default_formats</code> option. A user can change the order easily in these places, or reorder it after the fact with <code><a href="https://dplyr.tidyverse.org/reference/recode.html">dplyr::recode()</a></code>.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu">kable</span>(<span class="no">t</span> <span class="kw">%&gt;%</span>
        <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"row"</span>), <span class="fu">starts_with</span>(<span class="st">"ord"</span>)) <span class="kw">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(<span class="no">ord_layer_index</span> <span class="kw">==</span> <span class="fl">2</span>))</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F</td>
<td align="left">n</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Mean (SD)</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Median</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Q1, Q3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">F</td>
<td align="left">Min, Max</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Missing</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">n</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Mean (SD)</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Median</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Q1, Q3</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">M</td>
<td align="left">Min, Max</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">M</td>
<td align="left">Missing</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">6</td>
</tr>
</tbody>
</table>
</div>
<div id="sorting-count-target-values" class="section level2">
<h2 class="hasAnchor">
<a href="#sorting-count-target-values" class="anchor"></a>Sorting ‘Count’ Target Values</h2>
<p>The order counts should be displayed in a table can be deceptively complex. Tplyr offers three different methods of sorting the values of a target variable in a count layer. The function <code><a href="../reference/ordering.html">set_order_count_method()</a></code> can be used to change how a count layer is sorted.</p>
<ol style="list-style-type: decimal">
<li>Sorting a count layer defaults to sorting the target variable as a factor. This allows for easy custom sorting or will coerce it to a factor and sort automatically.</li>
<li>Similar to a ‘by’ variable, a count target can be sorted with a VARN variable.</li>
<li>Many tables require counts to be sorted based on the counts of a particular group. Tplyr can populate the ordering column based on the numeric value of any column. The function <code><a href="../reference/ordering.html">set_ordering_cols()</a></code> and <code>set_numeric_result_order_var()</code> specify the column, and numeric value the ordering column should be based on.</li>
</ol>
<div id="byvarn" class="section level3">
<h3 class="hasAnchor">
<a href="#byvarn" class="anchor"></a>byvarn</h3>
<p>If the target variable has a corresponding VARN variable, this VARN variable can also be used in the ordering column.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">RACE</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_order_count_method</a></span>(<span class="st">"byvarn"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="no">row_label1</span>, <span class="no">ord_layer_1</span>) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">BLACK OR AFRICAN AMERICAN</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">WHITE</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<div id="byfactor" class="section level3">
<h3 class="hasAnchor">
<a href="#byfactor" class="anchor"></a>byfactor</h3>
<p>If no method for ordering is passed the target variable is treated as a factor(coerced if necessary) and indexed in the order the factor levels are presented.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">adsl</span>$<span class="no">AGEGR1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="no">adsl</span>$<span class="no">AGEGR1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"&lt;65"</span>, <span class="st">"65-80"</span>, <span class="st">"&gt;80"</span>))
<span class="co"># Warnings suppressed to remove 'forcats' implicit NA warning</span>
<span class="fu"><a href="https://rdrr.io/r/base/warning.html">suppressWarnings</a></span>({
  <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
      <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>) <span class="kw">%&gt;%</span>
        <span class="co"># This is the default and not needed</span>
        <span class="fu"><a href="../reference/ordering.html">set_order_count_method</a></span>(<span class="st">"byfactor"</span>)
    ) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
    <span class="fu">select</span>(<span class="no">row_label1</span>, <span class="no">ord_layer_1</span>) <span class="kw">%&gt;%</span>
    <span class="fu">kable</span>()
})</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">&lt;65</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">65-80</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">&gt;80</td>
<td align="right">3</td>
</tr>
</tbody>
</table>
</div>
<div id="nested-sorting" class="section level3">
<h3 class="hasAnchor">
<a href="#nested-sorting" class="anchor"></a>Nested Sorting</h3>
<p>Sorting a nested count layer can be sorted with a mix of sorting methods. ‘byfactor’, ‘bycount’, and ‘byvarn’ can be used for both the first(grouping) and second(grouped) variables. In the example below, <code>EOSSTT</code> is sorted ‘byfactor’ which implicitly sorts alphabetically. <code>DCDECOD</code> is sorted ‘bycount’ which defaults to sorting by the ‘Placebo’ column.</p>
<p><code>ord_layer_2</code> contains the numeric values of the Placebo column, except for the “grouping” variables which is set to <code>Inf</code> to ensure it is always sorted at the top.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="fu">vars</span>(<span class="no">EOSSTT</span>, <span class="no">DCDECOD</span>)) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_order_count_method</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"byfactor"</span>, <span class="st">"bycount"</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"row"</span>), <span class="fu">starts_with</span>(<span class="st">"ord"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">COMPLETED</td>
<td align="left">COMPLETED</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">Inf</td>
</tr>
<tr class="even">
<td align="left">COMPLETED</td>
<td align="left">COMPLETED</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">58</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">DISCONTINUED</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">Inf</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">DEATH</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">LACK OF EFFICACY</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">LOST TO FOLLOW-UP</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">PHYSICIAN DECISION</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">PROTOCOL VIOLATION</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">STUDY TERMINATED BY SPONSOR</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">WITHDRAWAL BY SUBJECT</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">9</td>
</tr>
</tbody>
</table>
<p>One sort method can be passed which will be used by both variables. In this example both <code>EOSSTT</code> and <code>DCDECOD</code> will be sorted by the count in the ‘Total’ column. When both the inside and outside variable use “bycount”, the parameters entered to <code>set_ordering_cols</code> and <code>set_result_order_var</code> will apply to both variables.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_total_group</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="fu">vars</span>(<span class="no">EOSSTT</span>, <span class="no">DCDECOD</span>)) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_order_count_method</a></span>(<span class="st">"bycount"</span>) <span class="kw">%&gt;%</span>
      <span class="co">#set_order_count_method("bycount", "bycount") %&gt;% This is functionally the same.</span>
      <span class="fu"><a href="../reference/ordering.html">set_ordering_cols</a></span>(<span class="no">Total</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"row"</span>),  <span class="no">var1_Total</span>, <span class="fu">starts_with</span>(<span class="st">"ord"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">row_label2</th>
<th align="left">var1_Total</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">COMPLETED</td>
<td align="left">COMPLETED</td>
<td align="left">110 ( 43.3%)</td>
<td align="right">1</td>
<td align="right">110</td>
<td align="right">Inf</td>
</tr>
<tr class="even">
<td align="left">COMPLETED</td>
<td align="left">COMPLETED</td>
<td align="left">110 ( 43.3%)</td>
<td align="right">1</td>
<td align="right">110</td>
<td align="right">110</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">DISCONTINUED</td>
<td align="left">144 ( 56.7%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">Inf</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">92 ( 36.2%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">92</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">DEATH</td>
<td align="left">3 ( 1.2%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">LACK OF EFFICACY</td>
<td align="left">4 ( 1.6%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">LOST TO FOLLOW-UP</td>
<td align="left">2 ( 0.8%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">PHYSICIAN DECISION</td>
<td align="left">3 ( 1.2%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">PROTOCOL VIOLATION</td>
<td align="left">6 ( 2.4%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">DISCONTINUED</td>
<td align="left">STUDY TERMINATED BY SPONSOR</td>
<td align="left">7 ( 2.8%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">DISCONTINUED</td>
<td align="left">WITHDRAWAL BY SUBJECT</td>
<td align="left">27 ( 10.6%)</td>
<td align="right">1</td>
<td align="right">144</td>
<td align="right">27</td>
</tr>
</tbody>
</table>
<p>By default the ordering helper for the grouping rows is set to Inf to ensure they are always at the top after being sorted. If you need to sort the outer rows on the bottom, or sort the other values in a descending order, the function <code><a href="../reference/set_outer_sort_position.html">set_outer_sort_position()</a></code> allows you to change this behavior and set the ordering helper to -Inf.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_total_group</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="fu">vars</span>(<span class="no">EOSSTT</span>, <span class="no">DCDECOD</span>)) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_outer_sort_position.html">set_outer_sort_position</a></span>(<span class="st">"asc"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"ord"</span>), <span class="fu">starts_with</span>(<span class="st">"row"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
<th align="right">ord_layer_2</th>
<th align="left">row_label1</th>
<th align="left">row_label2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">-Inf</td>
<td align="left">COMPLETED</td>
<td align="left">COMPLETED</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">COMPLETED</td>
<td align="left">COMPLETED</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">-Inf</td>
<td align="left">DISCONTINUED</td>
<td align="left">DISCONTINUED</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="left">DISCONTINUED</td>
<td align="left">DEATH</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">DISCONTINUED</td>
<td align="left">LACK OF EFFICACY</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="left">DISCONTINUED</td>
<td align="left">LOST TO FOLLOW-UP</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">5</td>
<td align="left">DISCONTINUED</td>
<td align="left">PHYSICIAN DECISION</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">6</td>
<td align="left">DISCONTINUED</td>
<td align="left">PROTOCOL VIOLATION</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">7</td>
<td align="left">DISCONTINUED</td>
<td align="left">STUDY TERMINATED BY SPONSOR</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">8</td>
<td align="left">DISCONTINUED</td>
<td align="left">WITHDRAWAL BY SUBJECT</td>
</tr>
</tbody>
</table>
</div>
<div id="bycount" class="section level3">
<h3 class="hasAnchor">
<a href="#bycount" class="anchor"></a>bycount</h3>
<p>A common way to order incidence tables is by the number of occurrences for a particular group. Any column can be selected with <code><a href="../reference/ordering.html">set_ordering_cols()</a></code> which takes the value of the treatment group and any ‘cols’ value to select the column ordering should be done by.</p>
<p>If multiple types of counts are used in the layer, <code><a href="../reference/ordering.html">set_result_order_var()</a></code> can be used to select which should be used in ordering.</p>
<p>Here the treatment groups as well as the age groups will appear as columns. The <code><a href="../reference/ordering.html">set_ordering_cols()</a></code> call sets the sorting group as the Placebo + &gt;80 group to order on. The <code><a href="../reference/ordering.html">set_result_order_var()</a></code> changes the numeric variable to output.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01A</span>, <span class="kw">cols</span> <span class="kw">=</span> <span class="no">AGEGR1</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">EOSSTT</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_order_count_method</a></span>(<span class="st">"bycount"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_ordering_cols</a></span>(<span class="no">Placebo</span>, <span class="no">`&gt;80`</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_result_order_var</a></span>(<span class="no">pct</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="no">`var1_Placebo_&gt;80`</span>, <span class="no">ord_layer_1</span>) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">var1_Placebo_&gt;80</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">19 ( 63.3%)</td>
<td align="right">0.6333333</td>
</tr>
<tr class="even">
<td align="left">11 ( 36.7%)</td>
<td align="right">0.3666667</td>
</tr>
</tbody>
</table>
<p><code><a href="../reference/ordering.html">set_result_order_var()</a></code> can also be used when there are multiple numbers presented in the summary within one cell. In the example below <code>ord_layer_1</code> is presented with the distinct counts rather than the event counts.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adae</span>, <span class="no">TRTA</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/pop_data.html">set_pop_data</a></span>(<span class="no">adsl</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/pop_treat_var.html">set_pop_treat_var</a></span>(<span class="no">TRT01A</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_total_group</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AEBODSYS</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span>(<span class="no">USUBJID</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">"xx (xx.xx%) [xxx]"</span>, <span class="no">distinct</span>, <span class="no">pct</span>, <span class="no">n</span>)) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_order_count_method</a></span>(<span class="st">"bycount"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/ordering.html">set_result_order_var</a></span>(<span class="no">distinct_n</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"row"</span>), <span class="no">var1_Placebo</span>, <span class="fu">starts_with</span>(<span class="st">"ord"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu">kable</span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">row_label1</th>
<th align="left">var1_Placebo</th>
<th align="right">ord_layer_index</th>
<th align="right">ord_layer_1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CARDIAC DISORDERS</td>
<td align="left">4 (10.64%) [ 5]</td>
<td align="right">1</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">CONGENITAL, FAMILIAL AND GENETIC DISORDERS</td>
<td align="left">0 ( 0.00%) [ 0]</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">GASTROINTESTINAL DISORDERS</td>
<td align="left">6 (12.77%) [ 6]</td>
<td align="right">1</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">GENERAL DISORDERS AND ADMINISTRATION SITE CONDITIONS</td>
<td align="left">9 (23.40%) [ 11]</td>
<td align="right">1</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">IMMUNE SYSTEM DISORDERS</td>
<td align="left">0 ( 0.00%) [ 0]</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">INFECTIONS AND INFESTATIONS</td>
<td align="left">5 (10.64%) [ 5]</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">INJURY, POISONING AND PROCEDURAL COMPLICATIONS</td>
<td align="left">2 ( 4.26%) [ 2]</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">INVESTIGATIONS</td>
<td align="left">3 ( 6.38%) [ 3]</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">METABOLISM AND NUTRITION DISORDERS</td>
<td align="left">2 ( 4.26%) [ 2]</td>
<td align="right">1</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">MUSCULOSKELETAL AND CONNECTIVE TISSUE DISORDERS</td>
<td align="left">1 ( 2.13%) [ 1]</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">NERVOUS SYSTEM DISORDERS</td>
<td align="left">1 ( 2.13%) [ 1]</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">PSYCHIATRIC DISORDERS</td>
<td align="left">3 ( 6.38%) [ 3]</td>
<td align="right">1</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">RENAL AND URINARY DISORDERS</td>
<td align="left">1 ( 2.13%) [ 1]</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">RESPIRATORY, THORACIC AND MEDIASTINAL DISORDERS</td>
<td align="left">0 ( 0.00%) [ 0]</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">SKIN AND SUBCUTANEOUS TISSUE DISORDERS</td>
<td align="left">5 (14.89%) [ 7]</td>
<td align="right">1</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">VASCULAR DISORDERS</td>
<td align="left">0 ( 0.00%) [ 0]</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
