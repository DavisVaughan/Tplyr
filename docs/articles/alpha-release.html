<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tplyr (Alpha Release) • Tplyr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tplyr (Alpha Release)">
<meta property="og:description" content="Tplyr">
<meta property="og:image" content="/reference/figures/Atorus_Stickers_vF_Tplyr.png">
<meta property="og:image:alt" content="Tplyr Hex Sticker">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@AtorusR">
<meta name="twitter:site" content="@AtorusR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Tplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/Tplyr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Layer Vignettes</li>
    <li>
      <a href="../articles/desc-vignette.html">Descriptive Statistic Layers</a>
    </li>
    <li>
      <a href="../articles/count_shift.html">Count and Shift Tables</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Helpers</li>
    <li>
      <a href="../articles/riskdiff.html">Risk Difference</a>
    </li>
    <li>
      <a href="../articles/sort.html">Sorting a Tplyr Table</a>
    </li>
    <li>
      <a href="../articles/options-vignette.html">Tplyr Options</a>
    </li>
    <li>
      <a href="../articles/styled-table.html">Producing a Styled Table</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Release Vignettes</li>
    <li>
      <a href="../articles/alpha-release.html">Tplyr (Alpha Release)</a>
    </li>
    <li>
      <a href="../articles/beta-release.html">Tplyr (Beta Release)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/atorus-research/Tplyr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Tplyr (Alpha Release)</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/Tplyr/blob/master/vignettes/alpha-release.Rmd"><code>vignettes/alpha-release.Rmd</code></a></small>
      <div class="hidden name"><code>alpha-release.Rmd</code></div>

    </div>

    
    
<div id="the-alpha-release" class="section level1">
<h1 class="hasAnchor">
<a href="#the-alpha-release" class="anchor"></a>The Alpha Release</h1>
<p>This is an early preview of our new package, <code>Tplyr</code>. This package is still in development, and we’re actively working on new features. We decided to release this version early to get community feedback. If you find a bug in our code - please report it! If you’d like to see some particular feature - let us know! The more feedback we collect, the better the end product will be when we publish the first version on CRAN.</p>
</div>
<div id="what-is-tplyr" class="section level1">
<h1 class="hasAnchor">
<a href="#what-is-tplyr" class="anchor"></a>What is Tplyr?</h1>
<p><a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a> from tidyverse is a grammar of data manipulation. So what does that allow you to do? It gives you, as a data analyst, the capability to easily and intuitively approach the problem of manipulating your data into an analysis ready form. <code>dplyr</code> conceptually breaks things down into verbs that allow you to focus on <em>what</em> you want to do more than <em>how</em> you have to do it.</p>
<p><code>Tplyr</code> is designed around a similar concept, but its focus is on building summary tables within the clinical world. In the pharmaceutical industry, a great deal of the data presented in the outputs we create are very similar. For the most part, most of the tables created can be broken down into a few categories:</p>
<ul>
<li>Counting for event based variables or categories</li>
<li>Shifting, which is just counting a ‘from’ and a ‘to’</li>
<li>Generating descriptive statistics around some continuous variable.</li>
</ul>
<p>For many of the tables that go into a clinical submission, at least when considering safety outputs, the tables are made up of a combination of these approaches. Consider a demographics table - and let’s use an example from the PHUSE project Standard Analyses &amp; Code Sharing - <a href="https://www.phusewiki.org/docs/WorkingGroups/New%20Template%20Deliverables/Standard%20Analyses%20&amp;%20Code%20Sharing/Analyses%20and%20Displays%20Associated%20with%20Demographics,%20Disposition%20&amp;%20Medications.pdf">Analyses &amp; Displays Associated with Demographics, Disposition, and Medications in Phase 2-4 Clinical Trials and Integrated Summary Documents</a>.</p>
<div class="figure">
<img src="demo_table.png" alt=""><p class="caption">Demographics Table</p>
</div>
<p>When you look at this table, you can begin breaking this output down into smaller, redundant, components. These components can be viewed as ‘layers’, and the table as a whole is constructed by stacking the layers. The boxes in the image above represent how you can begin to conceptualize this.</p>
<ul>
<li>First we have Sex, which is made up of n (%) counts.</li>
<li>Next we have Age as a continuous variable, where we have a number of descriptive statistics, including n, mean, standard deviation, median, quartile 1, quartile 3, min, max, and missing values.</li>
<li>After that we have age, but broken into categories - so this is once again n (%) values.</li>
<li>Race - more counting,</li>
<li>Ethnicity - more counting</li>
<li>Weight - and we’re back to descriptive statistics.</li>
</ul>
<p>So we have one table, with 6 summaries (7 including the next page, not shown) - but only 2 different approaches to summaries being performed. In the same way that <code>dplyr</code> is a grammar of data manipulation, <code>Tplyr</code> aims to be a grammar of data summary. The goal of <code>Tplyr</code> is to allow you to program a summary table like you see it on the page, by breaking a larger problem into smaller ‘layers’, and combining them together like you see on the page.</p>
<p>Enough talking - let’s see some code. In these examples, we will be using data from the <a href="https://www.phusewiki.org/wiki/index.php?title=WG5_Project_09">PHUSE Test Data Factory</a> based on the <a href="https://www.cdisc.org/sdtmadam-pilot-project">original pilot project submission package</a>. Note: You can see our replication of the CDISC pilot using the PHUSE Test Data Factory data <a href="https://github.com/atorus-research/CDISC_pilot_replication">here</a>.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r">
<span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>, <span class="kw">where</span> <span class="kw">=</span> <span class="no">SAFFL</span> <span class="kw">==</span> <span class="st">"Y"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">AGE</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age (years)"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age Categories n (%)"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 9 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age (year… n          " 86"        " 84"            " 84"           </span>
<span class="co">#&gt; 2 Age (year… Mean (SD)  "75.2 ( 8.5… "74.4 ( 7.89)"   "75.7 ( 8.29)"  </span>
<span class="co">#&gt; 3 Age (year… Median     "76.0"       "76.0"           "77.5"          </span>
<span class="co">#&gt; 4 Age (year… Q1, Q3     "69.2, 81.8" "70.8, 80.0"     "71.0, 82.0"    </span>
<span class="co">#&gt; 5 Age (year… Min, Max   "52, 89"     "56, 88"         "51, 88"        </span>
<span class="co">#&gt; 6 Age (year… Missing    "  0"        "  0"            "  0"           </span>
<span class="co">#&gt; 7 Age Categ… &lt;65        "14 ( 16.3%… "11 ( 13.1%)"    " 8 (  9.5%)"   </span>
<span class="co">#&gt; 8 Age Categ… &gt;80        "30 ( 34.9%… "18 ( 21.4%)"    "29 ( 34.5%)"   </span>
<span class="co">#&gt; 9 Age Categ… 65-80      "42 ( 48.8%… "55 ( 65.5%)"    "47 ( 56.0%)"   </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<div id="the-tldr-before-the-nitty-gritty" class="section level2">
<h2 class="hasAnchor">
<a href="#the-tldr-before-the-nitty-gritty" class="anchor"></a>The TL;DR Before The Nitty Gritty</h2>
<p>Here are some of the high level benefits of using <code>Tplyr</code>:</p>
<ul>
<li>Easy construction of table data using an intuitive syntax</li>
<li>Smart string formatting for your numbers that’s easily specified by the user</li>
<li>A great deal of flexibility in what is performed and how it’s presented, without specifying hundreds of parameters</li>
<li>Extensibility (in the future…) - we’re going to open doors to allow you some level of customization.</li>
</ul>
</div>
</div>
<div id="how-tplyr-works" class="section level1">
<h1 class="hasAnchor">
<a href="#how-tplyr-works" class="anchor"></a>How Tplyr Works</h1>
<p>A <code>Tplyr</code> table is constructed of two main objects, a <code>table_table</code> object and <code>tplyr_layer</code> objects making up the different summaries that are to be performed.</p>
<div id="the-tplyr_table-object" class="section level2">
<h2 class="hasAnchor">
<a href="#the-tplyr_table-object" class="anchor"></a>The <code>tplyr_table</code> Object</h2>
<p>The <code>tplyr_table</code> object is the main container upon which a <code>tplyr</code> table is constructed. <code>tplyr</code> tables are made up of one or more layers. Each layer contains an instruction for a summary to be performed. The <code>tplyr_table</code> object contains those layers, and the general data, metadata, and logic necessary.</p>
<p>When a <code>tplyr_table</code> is created, it will contain the following bindings:</p>
<ul>
<li>target - The dataset upon which summaries will be performed</li>
<li>pop_data - The data containing population information. This defaults to the target dataset</li>
<li>cols - A categorical variable to present summaries grouped by column (in addition to <code>treat_var</code>)</li>
<li>table_where - The <code>where</code> parameter provided, used to subset the <code>target</code> data</li>
<li>treat_var - Variable used to distinguish treatment groups.</li>
<li>header_n - Default header N values based on <code>treat_var</code>
</li>
<li>pop_treat_var - The treatment variable for <code>pop_data</code> (if different)</li>
<li>layers - The container for individual layers of a <code>tplyr_table</code>
</li>
<li>treat_grps - Additional treatment groups to be added to the summary (i.e. Total)</li>
</ul>
<p><code>tplyr_table</code> allows you a basic interface to instantiate the object. Modifier functions are available to change individual parameters catered to your analysis.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>, <span class="kw">where</span> <span class="kw">=</span> <span class="no">SAFFL</span> <span class="kw">==</span> <span class="st">"Y"</span>)
<span class="no">t</span>
<span class="co">#&gt; *** tplyr_table ***</span>
<span class="co">#&gt; Target (data.frame):</span>
<span class="co">#&gt;  Name:  adsl</span>
<span class="co">#&gt;  Rows:  254</span>
<span class="co">#&gt;  Columns:  49 </span>
<span class="co">#&gt; pop_data (data.frame)</span>
<span class="co">#&gt;  Name:  target </span>
<span class="co">#&gt;  Rows:  254 </span>
<span class="co">#&gt;  Columns:  49 </span>
<span class="co">#&gt; treat_var variable (quosure)</span>
<span class="co">#&gt;  TRT01P</span>
<span class="co">#&gt; header_n:  header groups</span>
<span class="co">#&gt; treat_grps groupings (list)</span>
<span class="co">#&gt; Table Columns (cols):</span>
<span class="co">#&gt; where: == SAFFL Y</span>
<span class="co">#&gt; Number of layer(s): 0</span>
<span class="co">#&gt; layer_output: 0</span></pre></body></html></div>
</div>
<div id="the-tplyr_layer-object" class="section level2">
<h2 class="hasAnchor">
<a href="#the-tplyr_layer-object" class="anchor"></a>The <code>tplyr_layer</code> Object</h2>
<p>Users of <code>Tplyr</code> interface with <code>tplyr_layer</code> objects using the <code>group_&lt;type&gt;</code> family of functions. This family specifies the type of summary that is to be performed within a layer. <code>count</code> layers are used to create summary counts of some discrete variable. <code>desc</code> layers create descriptive statistics, and <code>shift</code> layers summaries the counts of different changes in states.</p>
<ul>
<li>
<strong>Count Layers</strong>
<ul>
<li>Count layers allow you to easily create summaries based on counting values with a variable. Additionally, this layer allows you to create n (%) summaries where you’re also summarizing the proportion of instances a value occurs compared to some denominator. Count layers are also capable of producing counts of nested relationships. For example, if you want to produce counts of an overall outside group, and then the subgroup counts within that group, you can simply specify the target variable as vars(OutsideVariable, InsideVariable). This allows you to do tables like Adverse Events where you want to see the Preferred Terms within Body Systems, all in one layer. <em>NOTE: Currently, % values are calculated on the fly using header N values calculated from the target dataset. This is something that we will be adding enhanced flexibility for in future releases (remember - this is an alpha release :))</em>
</li>
</ul>
</li>
<li>
<strong>Descriptive Statistics Layers</strong>
<ul>
<li>Descriptive statistics layers perform summaries on continuous variables. There are a number of summaries built into <code>tplyr</code> already that you can perform, including n, mean, median, standard deviation, variance, min, max, interquartile range, Q1, Q3, and missing value counts. From these available summaries, the default presentation of a descriptive statistics layer will output ‘n’, ‘Mean (SD)’, ‘Median’, ‘Q1, Q3’, ‘Min, Max’, and ‘Missing’. You can change these summaries using <code>set_format_strings</code>, and you can also add your own summaries using <code>set_custom_summaries</code>. This allows you to easily implement any additional summary statistics you want presented.</li>
</ul>
</li>
<li>
<strong>Shift Layers</strong>
<ul>
<li>
<em>NOTE: Shift layers are not yet implemented. Expect this in a future release</em>.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">cnt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">t</span>, <span class="no">AGEGR1</span>)
<span class="no">cnt</span>
<span class="co">#&gt; *** count_layer ***</span>
<span class="co">#&gt; Self:  count_layer &lt; 0x55a2ef93d478 &gt;</span>
<span class="co">#&gt; Parent:  tplyr_table &lt; 0x55a2eb1768e0 &gt;</span>
<span class="co">#&gt; target_var: </span>
<span class="co">#&gt;  AGEGR1</span>
<span class="co">#&gt; by: </span>
<span class="co">#&gt; where: TRUE</span>
<span class="co">#&gt; Layer(s): 0</span>

<span class="no">dsc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">t</span>, <span class="no">AGE</span>)
<span class="no">dsc</span>
<span class="co">#&gt; *** desc_layer ***</span>
<span class="co">#&gt; Self:  desc_layer &lt; 0x55a2efa97fb8 &gt;</span>
<span class="co">#&gt; Parent:  tplyr_table &lt; 0x55a2eb1768e0 &gt;</span>
<span class="co">#&gt; target_var: </span>
<span class="co">#&gt;  AGE</span>
<span class="co">#&gt; by: </span>
<span class="co">#&gt; where: TRUE</span>
<span class="co">#&gt; Layer(s): 0</span></pre></body></html></div>
</div>
<div id="adding-layers-to-a-table" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-layers-to-a-table" class="anchor"></a>Adding Layers to a Table</h2>
<p>Everyone has their own style of coding - so we’ve tried to be flexible to an extent. Overall, <code>tplyr</code> is built around tidy syntax, so all of our object construction supports piping with <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html">magrittr</a> (i.e. <code>%&gt;%</code>).</p>
<p>There are two ways to add layers to a <code>tplyr_table</code>: <code>add_layer</code> and <code>add_layers</code>. The difference is that <code>add_layer</code> allows you to construct the layer within the call to <code>add_layer</code>, whereas with <code>add_layers</code> you can attach multiple layers that have already been constructed upfront:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories n (%)"</span>)
  )</pre></body></html></div>
<p>Within <code>add_layer</code>, the syntax to constructing the count layer for Age Categories was written on the fly. <code>add_layer</code> is special in that it also allows you to use piping to use modifier functions on the layer being constructed</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories n (%)"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">"xx (xx.x%)"</span>, <span class="no">n</span>, <span class="no">pct</span>)) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/add_total_row.html">add_total_row</a></span>()
  )</pre></body></html></div>
<p><code>add_layers</code>, on the other hand, lets you isolate the code to construct a particular layer if you wanted to separate things out more. Some might find this cleaner to work with if you have a large number of layers being constructed.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>)

<span class="no">l1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">t</span>, <span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories n (%)"</span>)
<span class="no">l2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">t</span>, <span class="no">AGE</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age (years)"</span>)

<span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/layer_attachment.html">add_layers</a></span>(<span class="no">t</span>, <span class="no">l1</span>, <span class="no">l2</span>)</pre></body></html></div>
<p>Notice that when you construct the layers separately, you need to specify the table to which they belong. <code>add_layer</code> does this automatically. <code>tplyr_table</code> and <code>tplyr_layer</code> objects are built on environments, and the parent/child relationships are very important. This is why, even though the layer knows who its table parent is, the layers still need to be attached to the table (as the table doesn’t know who its children are). <a href="https://adv-r.hadley.nz/environments.html">Advanced R</a> does a very good job at explaining what environments in R are, their benefits, and how to use them.</p>
</div>
<div id="a-note-before-we-go-deeper" class="section level2">
<h2 class="hasAnchor">
<a href="#a-note-before-we-go-deeper" class="anchor"></a>A Note Before We Go Deeper</h2>
<p>Notice that when you construct a <code>tplyr_table</code> or a <code>tplyr_layer</code> that what displays is a summary of information about the table or layer? That’s because when you create these objects - it constructs the metadata, but does not process the actual data. This allows you to construct and make sure the pieces of your table fit together before you do the data processing - and it gives you a container to hold all of this metadata, and use it later if necessary.</p>
<p>To generate the data from a <code>tplyr_table</code> object, you use the function <code>build</code>:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories n (%)"</span>)
  )

<span class="no">t</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… &lt;65        14 ( 16.3%)  11 ( 13.1%)      " 8 (  9.5%)"   </span>
<span class="co">#&gt; 2 Age categ… &gt;80        30 ( 34.9%)  18 ( 21.4%)      "29 ( 34.5%)"   </span>
<span class="co">#&gt; 3 Age categ… 65-80      42 ( 48.8%)  55 ( 65.5%)      "47 ( 56.0%)"   </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<p>But there’s more you can get from <code>Tplyr</code>. It’s great to have the formatted numbers, but what about the numeric data behind the scenes? What if you want to calculate your own statistics based off of the counts? You can get that information as well using <code>get_numeric_data</code>. This returns the numeric data from each layer as a list of data frames:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/get_numeric_data.html">get_numeric_data</a></span>(<span class="no">t</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A tibble: 9 x 5</span>
<span class="co">#&gt;   TRT01P               `"Age categories n (%)"` summary_var     n total</span>
<span class="co">#&gt;   &lt;chr&gt;                &lt;chr&gt;                    &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 Placebo              Age categories n (%)     &lt;65            14    86</span>
<span class="co">#&gt; 2 Placebo              Age categories n (%)     &gt;80            30    86</span>
<span class="co">#&gt; 3 Placebo              Age categories n (%)     65-80          42    86</span>
<span class="co">#&gt; 4 Xanomeline High Dose Age categories n (%)     &lt;65            11    84</span>
<span class="co">#&gt; 5 Xanomeline High Dose Age categories n (%)     &gt;80            18    84</span>
<span class="co">#&gt; 6 Xanomeline High Dose Age categories n (%)     65-80          55    84</span>
<span class="co">#&gt; 7 Xanomeline Low Dose  Age categories n (%)     &lt;65             8    84</span>
<span class="co">#&gt; 8 Xanomeline Low Dose  Age categories n (%)     &gt;80            29    84</span>
<span class="co">#&gt; 9 Xanomeline Low Dose  Age categories n (%)     65-80          47    84</span></pre></body></html></div>
<p>By storing pertinent information, you can get more out of a <code>Tplyr</code> objects than processed data for display. And by specifying when you want to get data out of <code>Tplyr</code>, we can save you from repeatedly processing data while your constructing your outputs - which is particularly useful when that computation starts taking time.</p>
</div>
<div id="constructing-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-layers" class="anchor"></a>Constructing Layers</h2>
<p>The bulk of <code>Tplyr</code> coding comes from constructing your layers and specifying the work you want to be done. Before we get into this, it’s important to discuss how <code>Tplyr</code> handles string formatting.</p>
<div id="string-formatting-in-tplyr" class="section level3">
<h3 class="hasAnchor">
<a href="#string-formatting-in-tplyr" class="anchor"></a>String Formatting in <code>Tplyr</code>
</h3>
<p>String formatting in <code>Tplyr</code> is controlled by an object called an <code>f_str</code>, which is also the name of function you use to create these formats. To set these format strings into a <code>tplyr_layer</code>, you use the function <code>set_format_strings</code>, and this usage varies slightly between layer types (more on that later).</p>
<p>So - why is this object necessary. Consider this example:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">
<span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">AGE</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age (years)"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(
        <span class="st">'n'</span> <span class="kw">=</span> <span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">'xx'</span>, <span class="no">n</span>),
        <span class="st">'Mean (SD)'</span> <span class="kw">=</span> <span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">'xx.xx (xx.xxx)'</span>, <span class="no">mean</span>, <span class="no">sd</span>)
      )
  )

<span class="no">t</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 2 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age (year… n          86           84               84              </span>
<span class="co">#&gt; 2 Age (year… Mean (SD)  75.21 ( 8.5… 74.38 ( 7.886)   75.67 ( 8.286)  </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;int&gt;</span></pre></body></html></div>
<p>In a perfect world, the <code>f_str</code> calls wouldn’t be necessary - but in reality they allow us to infer a great deal of information from realistically very few user inputs. In the calls that you see above:</p>
<ul>
<li>The row labels in the <code>row_label2</code> column are taken from the left side of each <code>=</code> in <code>set_format_strings</code>
</li>
<li>The string formats, including integer length and decimal precision, and exact presentation formatting are taken from the strings within the first parameter of each <code>f_str</code> call</li>
<li>The second and greater parameters within each f_str call determine the descriptive statistic summaries that will be performed. This is connected to a number of default summaries available within <code>Tplyr</code>, but you can also create your own summaries (more on that later). The default summaries that are built in include:
<ul>
<li>
<code>n</code> = Number of observations</li>
<li>
<code>mean</code> = Mean</li>
<li>
<code>sd</code> = Standard Deviation</li>
<li>
<code>var</code> = Variance</li>
<li>
<code>iqr</code> = Inter Quartile Range</li>
<li>
<code>q1</code> = 1st quartile</li>
<li>
<code>q3</code> = 3rd quartile</li>
<li>
<code>min</code> = Minimum value</li>
<li>
<code>max</code> = Maximum value</li>
<li>
<code>missing</code> = Count of NA values</li>
</ul>
</li>
<li>When two summaries are placed on the same <code>f_str</code> call, then those two summaries are formatted into the same string. This allows you to do a <code>Mean (SD)</code> type format where both numbers appear.</li>
</ul>
<p>This simple user input controls a significant amount of work in the back end of the data processing, and the <code>f_str</code> object allows that metadata to be collected.</p>
<p><code>f_str</code> objects are also used with count layers as well to control the data presentation. Instead of specifying the summaries performed, you use <code>n</code> and <code>pct</code> for your parameters, if you want both n’s and percents presented.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">'xx (xx.x)'</span>,<span class="no">n</span>,<span class="no">pct</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… &lt;65        14 (16.3)    11 (13.1)        " 8 ( 9.5)"     </span>
<span class="co">#&gt; 2 Age categ… &gt;80        30 (34.9)    18 (21.4)        "29 (34.5)"     </span>
<span class="co">#&gt; 3 Age categ… 65-80      42 (48.8)    55 (65.5)        "47 (56.0)"     </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;dbl&gt;</span>

<span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">'xx'</span>,<span class="no">n</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… &lt;65        14           11               " 8"            </span>
<span class="co">#&gt; 2 Age categ… &gt;80        30           18               "29"            </span>
<span class="co">#&gt; 3 Age categ… 65-80      42           55               "47"            </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<p>Really - format strings allow you to present your data however you like.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">'xx (•◡•) xx.x%'</span>,<span class="no">n</span>,<span class="no">pct</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 3 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… &lt;65        14 (•◡•) 16… 11 (•◡•) 13.1%   " 8 (•◡•)  9.5%"</span>
<span class="co">#&gt; 2 Age categ… &gt;80        30 (•◡•) 34… 18 (•◡•) 21.4%   "29 (•◡•) 34.5%"</span>
<span class="co">#&gt; 3 Age categ… 65-80      42 (•◡•) 48… 55 (•◡•) 65.5%   "47 (•◡•) 56.0%"</span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<p>But should you? Probably not.</p>
</div>
</div>
<div id="descriptive-statistic-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#descriptive-statistic-layers" class="anchor"></a>Descriptive Statistic Layers</h2>
<p>As covered under string formatting, <code>set_format_strings</code> controls a great deal of what happens within a descriptive statistics layer. Note that there are some built in defaults to what’s output:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">AGE</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age (years)"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 6 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age (year… n          " 86"        " 84"            " 84"           </span>
<span class="co">#&gt; 2 Age (year… Mean (SD)  "75.2 ( 8.5… "74.4 ( 7.89)"   "75.7 ( 8.29)"  </span>
<span class="co">#&gt; 3 Age (year… Median     "76.0"       "76.0"           "77.5"          </span>
<span class="co">#&gt; 4 Age (year… Q1, Q3     "69.2, 81.8" "70.8, 80.0"     "71.0, 82.0"    </span>
<span class="co">#&gt; 5 Age (year… Min, Max   "52, 89"     "56, 88"         "51, 88"        </span>
<span class="co">#&gt; 6 Age (year… Missing    "  0"        "  0"            "  0"           </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;int&gt;</span></pre></body></html></div>
<p>To override these defaults, just specify the summaries that you want to be performed using <code>set_format_strings</code> as described above. But what if <code>Tplyr</code> doesn’t have a built in function to do the summary statistic that you want to see? Well - you can make your own! This is where <code>set_custom_summaries</code> comes into play. Let’s say you want to derive a geometric mean.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">AGE</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Sepal Length"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_custom_summaries.html">set_custom_summaries</a></span>(
        <span class="kw">geometric_mean</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span>(<span class="no">.var</span>[<span class="no">.var</span> <span class="kw">&gt;</span> <span class="fl">0</span>]), <span class="kw">na.rm</span><span class="kw">=</span><span class="fl">TRUE</span>) / <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">.var</span>))
      ) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(
        <span class="st">'Geometric Mean (SD)'</span> <span class="kw">=</span> <span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">'xx.xx (xx.xxx)'</span>, <span class="no">geometric_mean</span>, <span class="no">sd</span>)
      )
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 1 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Sepal Len… Geometric… 74.70 ( 8.5… 73.94 ( 7.886)   75.18 ( 8.286)  </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;int&gt;</span></pre></body></html></div>
<p>In <code>set_custom_summaries</code>, first you name the summary being performed. This is important - that name is what you use in the f_str call to incorporate it into a format. Next, you program or call the function desired. What happens in the background is that this is used in a call to <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">dplyr::summarize</a></code> - so use similar syntax. Use the variable name <code>.var</code> in your custom summary function. This is necessary because it allows a generic variable name to be used when multiple target variables are specified - and therefore the function can be applied to both target variables.</p>
<p>Sometimes there’s a need to present multiple variables summarized side by side. <code>Tplyr</code> makes this easy as well.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="fu">vars</span>(<span class="no">AGE</span>, <span class="no">AVGDD</span>), <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age and Avg. Daily Dose"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 6 x 11</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age and A… n          " 86"        " 84"            " 84"           </span>
<span class="co">#&gt; 2 Age and A… Mean (SD)  "75.2 ( 8.5… "74.4 ( 7.89)"   "75.7 ( 8.29)"  </span>
<span class="co">#&gt; 3 Age and A… Median     "76.0"       "76.0"           "77.5"          </span>
<span class="co">#&gt; 4 Age and A… Q1, Q3     "69.2, 81.8" "70.8, 80.0"     "71.0, 82.0"    </span>
<span class="co">#&gt; 5 Age and A… Min, Max   "52, 89"     "56, 88"         "51, 88"        </span>
<span class="co">#&gt; 6 Age and A… Missing    "  0"        "  0"            "  0"           </span>
<span class="co">#&gt; # … with 6 more variables: var2_Placebo &lt;chr&gt;, `var2_Xanomeline High</span>
<span class="co">#&gt; #   Dose` &lt;chr&gt;, `var2_Xanomeline Low Dose` &lt;chr&gt;, ord_layer_index &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_1 &lt;int&gt;, ord_layer_2 &lt;int&gt;</span></pre></body></html></div>
<p><code>Tplyr</code> summarizes both variables and merges them together. This makes creating tables where you need to compare BASE, AVAL, and CHG next to each other nice and simple. Note the use of <code>vars</code> - in any situation where you’d like to use multiple variable names in a parameter, use <code><a href="https://dplyr.tidyverse.org/reference/vars.html">dplyr::vars</a></code> to specify the variables. You can use text strings in the calls to <code><a href="https://dplyr.tidyverse.org/reference/vars.html">dplyr::vars</a></code> as well.</p>
</div>
<div id="count-layers" class="section level2">
<h2 class="hasAnchor">
<a href="#count-layers" class="anchor"></a>Count Layers</h2>
<p>Count layers generally allow you to create n and n (%) count type summaries. There are a few extra features here as well. Let’s say that you want a total row within your counts. This is easy with <code><a href="../reference/add_total_row.html">add_total_row()</a></code>:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/add_total_row.html">add_total_row</a></span>()
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 4 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… &lt;65        14 ( 16.3%)  11 ( 13.1%)      " 8 (  9.5%)"   </span>
<span class="co">#&gt; 2 Age categ… &gt;80        30 ( 34.9%)  18 ( 21.4%)      "29 ( 34.5%)"   </span>
<span class="co">#&gt; 3 Age categ… 65-80      42 ( 48.8%)  55 ( 65.5%)      "47 ( 56.0%)"   </span>
<span class="co">#&gt; 4 Age categ… NA         86 (100.0%)  84 (100.0%)      "84 (100.0%)"   </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<p>Sometimes it’s also necessary to count summaries based on distinct values. <code>Tplyr</code> allows you to do this as well with <code>set_distinct_by</code>:</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adae</span>, <span class="no">TRTA</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="st">'Subjects with at least one adverse event'</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_distinct_by.html">set_distinct_by</a></span>(<span class="no">USUBJID</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">'xx'</span>, <span class="no">n</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 1 x 6</span>
<span class="co">#&gt;   row_label1 var1_Placebo `var1_Xanomelin… `var1_Xanomelin… ord_layer_index</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;                      &lt;int&gt;</span>
<span class="co">#&gt; 1 Subjects … 47           77               76                             1</span>
<span class="co">#&gt; # … with 1 more variable: ord_layer_1 &lt;lgl&gt;</span></pre></body></html></div>
<p>There’s another trick going on here - to create a summary with row label text like you see above, text strings can be used as the target variables. Here, we use this in combination with <code>set_distinct_by</code> to count distinct subjects.</p>
<p>Adverse event tables often call for counting AEs of something like a body system and counting actual events within that body system. <code>Tplyr</code> has means of making this simple for the user as well.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adae</span>, <span class="no">TRTA</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="fu">vars</span>(<span class="no">AEBODSYS</span>, <span class="no">AEDECOD</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 104 x 8</span>
<span class="co">#&gt;    row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt;  1 CARDIAC D… "CARDIAC … " 5 ( 10.6%… " 6 (  7.8%)"    " 6 (  7.9%)"   </span>
<span class="co">#&gt;  2 CARDIAC D… "   ATRIA… " 0 (  0.0%… " 0 (  0.0%)"    " 1 (  1.3%)"   </span>
<span class="co">#&gt;  3 CARDIAC D… "   ATRIA… " 0 (  0.0%… " 1 (  1.3%)"    " 0 (  0.0%)"   </span>
<span class="co">#&gt;  4 CARDIAC D… "   ATRIA… " 1 (  2.1%… " 0 (  0.0%)"    " 0 (  0.0%)"   </span>
<span class="co">#&gt;  5 CARDIAC D… "   BUNDL… " 1 (  2.1%… " 0 (  0.0%)"    " 0 (  0.0%)"   </span>
<span class="co">#&gt;  6 CARDIAC D… "   CARDI… " 1 (  2.1%… " 0 (  0.0%)"    " 0 (  0.0%)"   </span>
<span class="co">#&gt;  7 CARDIAC D… "   MYOCA… " 0 (  0.0%… " 1 (  1.3%)"    " 2 (  2.6%)"   </span>
<span class="co">#&gt;  8 CARDIAC D… "   SINUS… " 0 (  0.0%… " 3 (  3.9%)"    " 1 (  1.3%)"   </span>
<span class="co">#&gt;  9 CARDIAC D… "   SUPRA… " 1 (  2.1%… " 0 (  0.0%)"    " 1 (  1.3%)"   </span>
<span class="co">#&gt; 10 CARDIAC D… "   SUPRA… " 0 (  0.0%… " 0 (  0.0%)"    " 1 (  1.3%)"   </span>
<span class="co">#&gt; # … with 94 more rows, and 3 more variables: ord_layer_index &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_1 &lt;int&gt;, ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<p>Note that the nesting of variables happens automatically.</p>
</div>
<div id="other-bells-and-whistles" class="section level2">
<h2 class="hasAnchor">
<a href="#other-bells-and-whistles" class="anchor"></a>Other Bells and Whistles</h2>
<p>For simplicity of demonstration, some other features have not yet been demonstrated - so let’s get into that now!</p>
<p>First up, it’s common to have to present a total group, or a treated group vs. the placebo. <code>Tplyr</code> allows you to create these groups as necessary using <code>add_treat_group</code> and the abbreviated function <code>add_total_group</code>.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_total_group</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_treat_grps</a></span>(<span class="kw">Treated</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Xanomeline High Dose"</span>, <span class="st">"Xanomeline Low Dose"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 3 x 10</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo var1_Total var1_Treated `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… &lt;65        " 14 ( 16.3… " 33 ( 13… " 19 ( 11.3… " 11 ( 13.1%)"  </span>
<span class="co">#&gt; 2 Age categ… &gt;80        " 30 ( 34.9… " 77 ( 30… " 47 ( 28.0… " 18 ( 21.4%)"  </span>
<span class="co">#&gt; 3 Age categ… 65-80      " 42 ( 48.8… "144 ( 56… "102 ( 60.7… " 55 ( 65.5%)"  </span>
<span class="co">#&gt; # … with 4 more variables: `var1_Xanomeline Low Dose` &lt;chr&gt;,</span>
<span class="co">#&gt; #   ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;, ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<p>What about having different by group variables? So far I’ve only demonstrated <code>by</code> to present row label text. It additionally allows you to use grouping variables as well:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fu">vars</span>(<span class="st">"Age categories"</span>, <span class="no">SEX</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 6 x 10</span>
<span class="co">#&gt;   row_label1 row_label2 row_label3 var1_Placebo `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… F          &lt;65        " 9 ( 10.5%… " 5 (  6.0%)"   </span>
<span class="co">#&gt; 2 Age categ… F          &gt;80        "22 ( 25.6%… " 7 (  8.3%)"   </span>
<span class="co">#&gt; 3 Age categ… F          65-80      "22 ( 25.6%… "28 ( 33.3%)"   </span>
<span class="co">#&gt; 4 Age categ… M          &lt;65        " 5 (  5.8%… " 6 (  7.1%)"   </span>
<span class="co">#&gt; 5 Age categ… M          &gt;80        " 8 (  9.3%… "11 ( 13.1%)"   </span>
<span class="co">#&gt; 6 Age categ… M          65-80      "20 ( 23.3%… "27 ( 32.1%)"   </span>
<span class="co">#&gt; # … with 5 more variables: `var1_Xanomeline Low Dose` &lt;chr&gt;,</span>
<span class="co">#&gt; #   ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;, ord_layer_2 &lt;int&gt;,</span>
<span class="co">#&gt; #   ord_layer_3 &lt;dbl&gt;</span></pre></body></html></div>
<p>Grouping by columns? We’ve got that to - but this is actually specified at the <code>tplyr_table</code> level. Why? It gets complicated if layers don’t have consistent columns, and stacking them together would get complex. Similarly, assuming you’d want the <code>cols</code> argument the same between layers, it’s more tedious to specify it on every layer constructor.</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>, <span class="kw">cols</span><span class="kw">=</span><span class="no">SEX</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">AGEGR1</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age categories"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>()
<span class="co">#&gt; # A tibble: 3 x 11</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo_F var1_Placebo_M `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;           </span>
<span class="co">#&gt; 1 Age categ… &lt;65        " 9 ( 17.0%)"  " 5 ( 15.2%)"  " 5 ( 12.5%)"   </span>
<span class="co">#&gt; 2 Age categ… &gt;80        "22 ( 41.5%)"  " 8 ( 24.2%)"  " 7 ( 17.5%)"   </span>
<span class="co">#&gt; 3 Age categ… 65-80      "22 ( 41.5%)"  "20 ( 60.6%)"  "28 ( 70.0%)"   </span>
<span class="co">#&gt; # … with 6 more variables: `var1_Xanomeline High Dose_M` &lt;chr&gt;,</span>
<span class="co">#&gt; #   `var1_Xanomeline Low Dose_F` &lt;chr&gt;, `var1_Xanomeline Low Dose_M` &lt;chr&gt;,</span>
<span class="co">#&gt; #   ord_layer_index &lt;int&gt;, ord_layer_1 &lt;int&gt;, ord_layer_2 &lt;dbl&gt;</span></pre></body></html></div>
<p>Note that in both <code>by</code> and <code>cols</code> - multiple variable names (or text along with variable names) should be specified using <code><a href="https://dplyr.tidyverse.org/reference/vars.html">dplyr::vars</a></code>. We’ve tried to make the error messages explicit when you fail to do this, and help remind you of the proper parameter entry.</p>
</div>
<div id="preparing-your-table-for-presentation" class="section level2">
<h2 class="hasAnchor">
<a href="#preparing-your-table-for-presentation" class="anchor"></a>Preparing Your Table for Presentation</h2>
<p>Now that we’ve gotten through a lot of the functionality of <code>Tplyr</code>, what about when you’re ready to present your table? Well - we’re deferring the cosmetics to packages that already do this exceptionally well. We’re big fans of <a href="https://hughjonesd.github.io/huxtable/">huxtable</a>, as you may have seen from our package <a href="https://github.com/atorus-research/pharmaRTF">pharmaRTF</a>. RStudio is continually working on and improving <a href="https://gt.rstudio.com/">gt</a> - so we’re not reinventing the wheel here. But we can do our part to make it easier.</p>
<p>In a <code>huxtable</code> - the column headers of a table are just rows in a table. To make this preperation easier, we made the function <code>add_column_headers</code> into <code>Tplyr</code>. This allows you to simply use a string to created column headers - and it supports nesting. Let’s see it in action.</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">AGE</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age (Years)"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">mutate_all</span>(<span class="no">as.character</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/add_column_headers.html">add_column_headers</a></span>(
    <span class="st">' | Statistic | Placebo | Xanomeline (High) | Xanomeline (Low) | ord_layer_index | ord_layer_1 | ord_layer_2'</span>
  )
<span class="co">#&gt; # A tibble: 7 x 8</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 ""         Statistic  "Placebo"    "Xanomeline (Hi… "Xanomeline (Lo…</span>
<span class="co">#&gt; 2 "Age (Yea… n          " 86"        " 84"            " 84"           </span>
<span class="co">#&gt; 3 "Age (Yea… Mean (SD)  "75.2 ( 8.5… "74.4 ( 7.89)"   "75.7 ( 8.29)"  </span>
<span class="co">#&gt; 4 "Age (Yea… Median     "76.0"       "76.0"           "77.5"          </span>
<span class="co">#&gt; 5 "Age (Yea… Q1, Q3     "69.2, 81.8" "70.8, 80.0"     "71.0, 82.0"    </span>
<span class="co">#&gt; 6 "Age (Yea… Min, Max   "52, 89"     "56, 88"         "51, 88"        </span>
<span class="co">#&gt; 7 "Age (Yea… Missing    "  0"        "  0"            "  0"           </span>
<span class="co">#&gt; # … with 3 more variables: ord_layer_index &lt;chr&gt;, ord_layer_1 &lt;chr&gt;,</span>
<span class="co">#&gt; #   ord_layer_2 &lt;chr&gt;</span></pre></body></html></div>
<p>Columns are separated with the bar character (|). Nesting is done by adding text in curly brackets (i.e. {}).</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="fu">vars</span>(<span class="no">AGE</span>, <span class="no">AVGDD</span>), <span class="kw">by</span> <span class="kw">=</span> <span class="st">"Age and Avg. Daily Dose"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">mutate_all</span>(<span class="no">as.character</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/add_column_headers.html">add_column_headers</a></span>(
    <span class="st">' | Statistic | Age {Placebo | Xanomeline (High) | Xanomeline (Low)} | Average Daily Dose {Placebo | Xanomeline (High) | Xanomeline (Low)} | Layer Index | Layer Order 1 | Layer Order 2'</span>
  )
<span class="co">#&gt; # A tibble: 8 x 11</span>
<span class="co">#&gt;   row_label1 row_label2 var1_Placebo `var1_Xanomelin… `var1_Xanomelin…</span>
<span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;           </span>
<span class="co">#&gt; 1 ""         ""         "Age"        ""               ""              </span>
<span class="co">#&gt; 2 ""         "Statisti… "Placebo"    "Xanomeline (Hi… "Xanomeline (Lo…</span>
<span class="co">#&gt; 3 "Age and … "n"        " 86"        " 84"            " 84"           </span>
<span class="co">#&gt; 4 "Age and … "Mean (SD… "75.2 ( 8.5… "74.4 ( 7.89)"   "75.7 ( 8.29)"  </span>
<span class="co">#&gt; 5 "Age and … "Median"   "76.0"       "76.0"           "77.5"          </span>
<span class="co">#&gt; 6 "Age and … "Q1, Q3"   "69.2, 81.8" "70.8, 80.0"     "71.0, 82.0"    </span>
<span class="co">#&gt; 7 "Age and … "Min, Max" "52, 89"     "56, 88"         "51, 88"        </span>
<span class="co">#&gt; 8 "Age and … "Missing"  "  0"        "  0"            "  0"           </span>
<span class="co">#&gt; # … with 6 more variables: var2_Placebo &lt;chr&gt;, `var2_Xanomeline High</span>
<span class="co">#&gt; #   Dose` &lt;chr&gt;, `var2_Xanomeline Low Dose` &lt;chr&gt;, ord_layer_index &lt;chr&gt;,</span>
<span class="co">#&gt; #   ord_layer_1 &lt;chr&gt;, ord_layer_2 &lt;chr&gt;</span></pre></body></html></div>
</div>
</div>
<div id="tying-it-all-together" class="section level1">
<h1 class="hasAnchor">
<a href="#tying-it-all-together" class="anchor"></a>Tying It All Together</h1>
<p>Ok - so, this was a lot to cover. But how does this all fit in the grand scheme of things? Let’s look at a more complete example - what if we wanted to build that demographics table</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="no">t</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/tplyr_table.html">tplyr_table</a></span>(<span class="no">adsl</span>, <span class="no">TRT01P</span>, <span class="kw">where</span> <span class="kw">=</span> (<span class="no">SAFFL</span> <span class="kw">==</span> <span class="st">"Y"</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/treat_grps.html">add_total_group</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">SEX</span>, <span class="kw">by</span><span class="kw">=</span><span class="st">"Sex"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">"xx (xxx%)"</span>,<span class="no">n</span>,<span class="no">pct</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">AGE</span>, <span class="kw">by</span><span class="kw">=</span><span class="st">"Age Categories"</span>)
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">RACE</span>, <span class="kw">by</span><span class="kw">=</span><span class="st">"Race"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">"xx (xxx%)"</span>,<span class="no">n</span>,<span class="no">pct</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_count</a></span>(<span class="no">ETHNIC</span>, <span class="kw">by</span><span class="kw">=</span><span class="st">"Ethnicity"</span>) <span class="kw">%&gt;%</span>
      <span class="fu"><a href="../reference/set_format_strings.html">set_format_strings</a></span>(<span class="fu"><a href="../reference/f_str.html">f_str</a></span>(<span class="st">"xx (xxx%)"</span>,<span class="no">n</span>,<span class="no">pct</span>))
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/layer_attachment.html">add_layer</a></span>(
    <span class="fu"><a href="../reference/layer_constructors.html">group_desc</a></span>(<span class="no">WEIGHTBL</span>, <span class="kw">by</span><span class="kw">=</span><span class="st">"Weight"</span>)
  )

<span class="co"># build the table</span>
<span class="no">t</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/build.html">build</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">'row_label'</span>), <span class="no">var1_Placebo</span>, <span class="fu">starts_with</span>(<span class="st">'var1_X'</span>), <span class="no">var1_Total</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/add_column_headers.html">add_column_headers</a></span>(<span class="st">" |  | Placebo | Xanomeline (Low) | Xanomeline (High) | Total"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="../reference/apply_row_masks.html">apply_row_masks</a></span>() <span class="kw">%&gt;%</span>
  <span class="kw pkg">huxtable</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/huxtable/man/as_huxtable.html">as_hux</a></span>(<span class="kw">add_colnames</span><span class="kw">=</span><span class="fl">FALSE</span>)</pre></body></html></div>
<table class="table huxtable">
<col>
<col>
<col>
<col>
<col>
<col>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Placebo</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Xanomeline (Low)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Xanomeline (High)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Total</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Sex</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">F</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">53 ( 62%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">40 ( 48%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">50 ( 60%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">143 ( 56%)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">M</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">33 ( 38%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">44 ( 52%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">34 ( 40%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">111 ( 44%)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Age Categories</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">n</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 86</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 84</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 84</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">254</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Mean (SD)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">75.2 ( 8.59)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">74.4 ( 7.89)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">75.7 ( 8.29)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">75.1 ( 8.25)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Median</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">76.0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">76.0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">77.5</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">77.0</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Q1, Q3</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">69.2, 81.8</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">70.8, 80.0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">71.0, 82.0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">70.0, 81.0</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Min, Max</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">52, 89</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">56, 88</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">51, 88</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">51, 89</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Missing</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  0</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Race</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">AMERICAN INDIAN OR ALASKA NATIVE</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 0 (  0%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 1 (  1%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 0 (  0%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 1 (  0%)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">BLACK OR AFRICAN AMERICAN</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 8 (  9%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 9 ( 11%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 6 (  7%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">23 (  9%)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">WHITE</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">78 ( 91%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">74 ( 88%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">78 ( 93%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">230 ( 91%)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Ethnicity</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">HISPANIC OR LATINO</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 3 (  3%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 3 (  4%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 6 (  7%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">12 (  5%)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">NOT HISPANIC OR LATINO</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">83 ( 97%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">81 ( 96%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">78 ( 93%)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">242 ( 95%)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Weight</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">n</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 86</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 84</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 84</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">254</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Mean (SD)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 62.76 ( 12.772)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 70.00 ( 14.653)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 67.28 ( 14.124)</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 66.65 ( 14.131)</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Median</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 60.55</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 69.20</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 64.90</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 66.70</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Q1, Q3</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 53.62,  74.18</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 56.98,  80.30</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 56.05,  77.45</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 55.30,  77.10</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Min, Max</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 34.0,  86.2</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 41.7, 108.0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 45.4, 106.1</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"> 34.0, 108.0</td>
</tr>
<tr>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;"></td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">Missing</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  0</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  1</td>
<td style="vertical-align: top; text-align: left; white-space: normal; padding: 6pt 6pt 6pt 6pt; font-weight: normal;">  1</td>
</tr>
</table>
<p>And just like that - you have a huxtable table ready to go.</p>
<p>Wouldn’t it be nice if you had some resources for where to take it from here? Oh wait - you do! This is the perfect point to take things to the next step in the workflow: preparing and delivering your final output. We have plenty for you to read in our <a href="https://atorus-research.github.io/pharmaRTF.html">pharmaRTF</a> vignettes about how to get started with huxtable, and create your RTF output files.</p>
</div>
<div id="this-is-the-alpha-release---whats-next" class="section level1">
<h1 class="hasAnchor">
<a href="#this-is-the-alpha-release---whats-next" class="anchor"></a>This is the alpha release - what’s next?</h1>
<p>We’ve gotten a lot built into <code>Tplyr</code>, but there’s a ways to go. Here are some of the things that we’re planning to implement but don’t have ready yet:</p>
<ul>
<li>Modifying denominators used in counts. They’re currently calculated based on treatment group on the fly. There are a lot of ways to do this, and we plan to offer some other options and the ability to provide your own set of denominators.</li>
<li>We plan to open up methods to add new columns to a layer, where you can add calculations like risk difference (possibly a set of defaults).<br>
</li>
<li>Automated decimal precision calculation. Sometimes the decimal precision should be calculated based on data as collected. We’re planning an interface for this, so you could do things like mean collected precision + 1, SD is collected precision +2, etc. This could interface with your ‘by’ group variables to determine the subset.</li>
<li>Headers only support one layer of nesting. We’d like to generalize this.</li>
<li>Allow automated collection of header N values and incorporation in column headers</li>
<li>Custom summaries don’t support multiple variable summaries (i.e. target_var = vars(var1, var2)). This will require an interface update but offer the capability without much greater difficulty.</li>
<li>Indented nesting formatting for count layers when 2 variables are supplied (i.e. target_var = vars(var1, var2)) - for AE tables with Preferred Term within Body System.</li>
</ul>
<p>And more.</p>
<p>Help us out! Test out our package, submit issues, submit feature requests. We’d love to hear from you!</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Eli Miller, Mike Stackhouse, Ashley Tarasiewicz, Nathan Kosiba.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
